# Generated by ubi-init

#  ____        _ _     _           
# | __ ) _   _(_) | __| | ___ _ __ 
# |  _ \| | | | | |/ _` |/ _ \ '__|
# | |_) | |_| | | | (_| |  __/ |   
# |____/ \__,_|_|_|\__,_|\___|_|   
#                                  
FROM registry.access.redhat.com/ubi9/toolbox:9.2 as builder

# This will be used in ubi-micro
RUN dnf --installroot=/tmp/ubi-micro \
        --nodocs --setopt=install_weak_deps=False \
        install -y \
        jq shadow-utils && \
    dnf --installroot=/tmp/ubi-micro \
        clean all

#  __  __       _       
# |  \/  | __ _(_)_ __  
# | |\/| |/ _` | | '_ \ 
# | |  | | (_| | | | | |
# |_|  |_|\__,_|_|_| |_|
#
FROM registry.access.redhat.com/ubi9/ubi-micro:9.2

COPY --from=builder /tmp/ubi-micro/ /

WORKDIR /opt/ubi-user

RUN useradd -M ubi-user

USER ubi-user

ENTRYPOINT ["jq"]

CMD ["--version"]
